#!/bin/sh
NAME="m4"
RELEASE="1"
VERSION="1.4.20"
BUILD_DEPENDS="gmake"
SOURCES="https://ftp.gnu.org/gnu/m4/m4-$VERSION.tar.gz"
DEPENDS=""
SHA256SUM="6ac4fc31ce440debe63987c2ebbf9d7b6634e67a7c3279257dc7361de8bdb3ef"
DESCRIPTION="GNU m4"

build() {
    # Work around GCC 15 compatibility issue with gnulib's nodiscard attribute
    export CFLAGS="${CFLAGS} -Wno-attributes -D_GL_ATTRIBUTE_NODISCARD="
    kpkgConfigure
    make -j$(nproc)
}

package() {
    make DESTDIR=$ROOT install
    rm -rf "$ROOT/usr/share/info/dir"
}

