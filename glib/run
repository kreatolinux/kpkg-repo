#!/bin/sh
NAME="glib"
RELEASE="2"
VERSION="2.86.2"
SOURCES="https://download.gnome.org/sources/glib/2.86/glib-$VERSION.tar.xz"
BUILD_DEPENDS="meson ninja gobject-introspection python-setuptools python-packaging"
BOOTSTRAP_DEPENDS="meson ninja python-setuptools python-packaging"
SHA256SUM="119d1708ca022556d6d2989ee90ad1b82bd9c0d1667e066944a6d0020e2d5e57"
DESCRIPTION="Low-level core library that forms the basis for projects such as GTK+ and GNOME"

build() {
    if [ "$KPKG_BOOTSTRAP" = "1" ]; then
        INTROSPECTION="disabled"
    else
        INTROSPECTION="enabled"
    fi

    echo "debug: introspection is $INTROSPECTION"

    meson setup \
    --prefix=/usr \
    --buildtype=release \
    -Dintrospection="$INTROSPECTION" \
    -Dman=false \
    build
    ninja -C build
}

package() {
    DESTDIR="$ROOT" ninja -C build install
}
