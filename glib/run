#!/bin/sh
NAME="glib"
RELEASE="2"
VERSION="2.86.2"
SOURCES="https://download.gnome.org/sources/glib/2.86/glib-$VERSION.tar.xz"
BUILD_DEPENDS="meson ninja gobject-introspection python-setuptools python-packaging"
BOOTSTRAP_DEPENDS="meson ninja python-setuptools python-packaging"
SHA256SUM="8a724e970855357ea8101e27727202392a0ffd5410a98336aed54ec59113e611"
DESCRIPTION="Low-level core library that forms the basis for projects such as GTK+ and GNOME"

build() {
    if [ "$KPKG_BOOTSTRAP" = "1" ]; then
        INTROSPECTION="disabled"
    else
        INTROSPECTION="enabled"
    fi

    echo "debug: introspection is $INTROSPECTION"

    meson setup \
    --prefix=/usr \
    --buildtype=release \
    -Dintrospection="$INTROSPECTION" \
    -Dman=false \
    build
    ninja -C build
}

package() {
    DESTDIR="$ROOT" ninja -C build install
}
