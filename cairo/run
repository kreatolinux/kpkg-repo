#!/bin/sh
NAME="cairo"
RELEASE="5"
VERSION="1.18.4"
BUILD_DEPENDS="gmake"
SOURCES="https://gitlab.freedesktop.org/cairo/cairo/-/archive/$VERSION/cairo-$VERSION.tar.gz?ref_type=tags"
DEPENDS="libpng libx11 libxcb libxext libxrender libxext pixman fontconfig glib freetype pkgconf"
SHA256SUM="2f3e6e665dbbb420809102b71ad7d0f7ce870a0b1bf8b34c073f06aefb511fc6"
DESCRIPTION="2D graphics library"

prepare() {
        tar -xvf cairo-$VERSION.tar.xz
        cd cairo-$VERSION
        patch -p1 < ../24996e6ee241ebcd303dd34a2b06b37a6dd0c217.patch
}

build() {
    cd cairo-$VERSION
    kpkgConfigure --prefix=/usr    \
            --disable-static     \
            --enable-tee
    make
}

package() {
    cd cairo-$VERSION
    make DESTDIR="$ROOT" install
}
